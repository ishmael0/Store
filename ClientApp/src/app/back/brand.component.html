

<ng-template #form let-item="item">
  <nz-tabset [nzAnimated]="false">
    <nz-tab nzTitle="محتوای اصلی">
      <form nz-form [formGroup]="item">
        <nz-form-item>
          <nz-form-label [nzSm]="6" [nzXs]="24" nzFor="Id">شناسه</nz-form-label>
          <nz-tag [nzColor]="'#f50'">{{item.controls.Id.value}}</nz-tag>
          <nz-form-control [nzSm]="4" [nzXs]="24" nzErrorTip="وضعیت معتبر نیست">
            <nz-select formControlName="Status"  nzPlaceHolder="Select OS" nzShowSearch nzAllowClear [nzCustomTemplate]="statusTemplate">
              <nz-option *ngFor="let item of cs.Statuses" [nzValue]="item.title" nzCustomContent>
                {{item.label}}
                <i [style.color]="item.color" nz-icon [innerHtml]="icons[item.icon]"></i>
              </nz-option>
            </nz-select>
            <ng-template #statusTemplate let-selected>
              <ng-container *ngFor="let item of cs.Statuses">
                <div *ngIf="selected.nzValue==item.title">
                  {{item.label}}
                  <i nz-icon [style.color]="item.color" [innerHtml]="icons[item.icon]"></i>
                </div>
              </ng-container>
            </ng-template>
          </nz-form-control>
        </nz-form-item>


        <nz-form-item>
          <nz-form-label [nzSm]="6" [nzXs]="24" nzFor="Title">عنوان</nz-form-label>
          <nz-form-control [nzSm]="6" [nzXs]="24" nzErrorTip="عنوان را وارد کنید">
            <input nz-input formControlName="Title" />
          </nz-form-control>
          <nz-form-label [nzSm]="2" [nzXs]="24" nzFor="Summary">شرح خلاصه</nz-form-label>
          <nz-form-control [nzSm]="6" [nzXs]="24" nzErrorTip="شرح خلاصه را وارد کنید">
            <input nz-input formControlName="Summary" />
          </nz-form-control>
        </nz-form-item>


 
      </form>
    </nz-tab>
    <nz-tab nzTitle=" تصاویر  ({{item.controls.Images.value?.length}})">
      <div nz-row>
        <div nz-col [nzMd]="6" [nzXs]="24" style="text-align:center">
          <nz-form-label>تصاویر</nz-form-label>
          <br />
          <nz-alert nzType="info" class="alertInTopOfTable" nzMessage=" اولین تصویر، تصویر اصلی، دومین تصویر تصویر فرعی محسوب میشوند"></nz-alert>
          <nz-alert nzType="info" class="alertInTopOfTable" nzMessage=" میتوانید با کشیدن و رها کردن ترتیب تصاویر را تغییر دهید"></nz-alert>
          <button nz-button nzType="dashed" (click)=" imageModal = true ">اضافه کردن محصولات مشابه</button>
        </div>
        <div nz-col [nzSm]="12" [nzXs]="24">
          <div nz-row cdkDropList (cdkDropListDropped)="dropAndDrop_DropHandler($event, item,'Images')">
            <nz-card *ngFor="let r of item.controls.Images.value" nz-col [nzMd]="6" [nzXs]="24" cdkDrag>
              <img style="width:100%" [src]="'/front'+r.Path" />
              <br />
              <input type="text" nz-input style="width:100%" placeholder="توضیحات" [(ngModel)]="r.Description" />
              <i nz-icon (click)="deleteFromList(item, 'Images',r.Path,'Path' )"
                 style="color: #F93154;"
                 class="larger"
                 [innerHtml]="icons['delete']"></i>
            </nz-card>
          </div>
        </div>
      </div>
    </nz-tab>
  </nz-tabset>
</ng-template>

<ng-template #viewMessage>
  آیدی: 012331323
</ng-template>
<ng-template #search>

</ng-template>

<ng-template #tableBodyPicker let-item="item">

</ng-template>

<ng-template #treeBody let-item="item">
  <nz-tag [nzColor]="'#f50'">{{ item.Id }}</nz-tag>
  {{ item.Title }}
  <ng-container *ngTemplateOutlet="mainTemplate?.statusView;context:{value:statusView(item.Status)}"></ng-container>
  {{ item.Create_}}
</ng-template>




<app-template #mainTemplate *ngIf="ok" [com]="this"></app-template>


<ng-container *ngIf="mainTemplate">


  <nz-modal [(nzVisible)]="imageModal" [nzFooter]="mainTemplate.modalEmptyFooter" nzTitle="افزودن تصویر" (nzOnCancel)="imageModal = false">
    <ng-container *nzModalContent>
      <app-image-uploader-card key="MonizaDB/Product" Id="1" (onOk)="addImage($event)"></app-image-uploader-card>
      <button style="float:left" nz-button nzType="primary" (click)="imageModal = false">تایید </button>
    </ng-container>
  </nz-modal>
</ng-container>
